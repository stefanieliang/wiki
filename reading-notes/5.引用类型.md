### 引用类型

> 本章内容
>
> - 使用对象
> - 创建并操作数组
> - 理解基本的 JavaScript 类型
> - 使用基本类型和基本包装类型

​	引用类型的值是**引用类型**的一个实例。在ECMAScript中，**引用类型**是一种数据结构。

对象是某个特定引用类型的**实例**，新对象是使用 new 操作符后跟一个**构造函数**来创建的。

#### 1. Object 类型

- 创建Object实例

  1. 使用 new 操作符后跟 Object 构造函数。

     ```JavaScript
     var person = new Object();
     person.name = "Nicholas";
     person.age = 29;
     ```

  2. 使用**对象字面量**表示法。此方法实际上不会调用Object构造函数。

     ```JavaScript
     var person = {
         name : "Nicholas",
         age : 29
     };
     ```

- 访问对象属性

  1. 点表示法，建议使用`person.name`
  2. 方括号表示法，主要优点是可以使用变量来访问属性`person[propertyName]`

#### 2. Array 类型

​	ECMAScript 数组的每一项可以保存任何类型的数据，ECMAScript 数组的大小是可以动态调整的。

- 创建数组

  1. 使用Array构造函数，可以省略new 操作符

     ```javascript
     var colors = new Array();
     var colors = new Array(20); // 长度为20
     var colors = new Array("red", "blue", "green"); // 长度为3
     ```

  2. 使用数组字面量表示法，此方法也不会调用Array构造函数。

     ```javascript
     var colors = ["red", "blue", "green"]; // 创建一个包含3 个字符串的数组
     var names = []; // 创建一个空数组
     ```

- 访问数组的值

  ```javascript
  colors.length; // 获取长度
  colors.length = 99; // 设置长度
  colors[colors.length] = 'red'; // 在数组末尾添加新项
  ```

- 检测数组

  ```javascript
  // 1.ECMAScript3（弃用），两个全局执行环境，会存在两个不同的Array构造函数
  if (value instanceof Array){
  	//对数组执行某些操作
  }
  
  // 2.ECMAScript5
  if (Array.isArray(value)){
  	//对数组执行某些操作
  }
  ```

- 栈方法，后进先出

  > push()：数组末尾添加
  >
  > pop()：返回最后一项

  ```javascript
  var colors = new Array(); 
  var count = colors.push("red", "green");
  alert(count); // 获取数组长度2
  
  var item = colors.pop(); 
  alert(item); // 取得最后一项"green"
  ```

- 队列方法，先进先出

  > shift()：返回数组第一项，长度减1
  >
  > unshift()：数组前端插入

  ```javascript
  var colors = new Array(); //创建一个数组
  var count = colors.push("red", "green"); //推入两项
  alert(count); // 获取数组长度2
  
  var item = colors.shift();
  alert(item); // 取得第一项"red"
  alert(colors.length); // 1,长度减1
  
  var colors = new Array(); //创建一个数组
  var count = colors.unshift("red", "green"); //推入两项
  alert(count); //2
  
  count = colors.unshift("black"); //推入另一项
  alert(count); //3
  var item = colors.pop(); //取得最后一项
  alert(item); //"green"
  alert(colors.length); //2
  ```

- 重排序方法

  1. reverse()：**改变**了原数组，反转数据项的顺序。

     ```javascript
     var values = [1, 2, 3, 4, 5];
     var c = values.reverse();
     
     alert(values); //5,4,3,2,1
     alert(c); //5,4,3,2,1
     values === c; //true
     ```

  2. sort()：**改变**了原数组，默认按升序排列数组项。sort()方法会调用每个数组项（即使是数值）的toString()方法，然后比较得到的字符串。

     ```javascript
     var values = [0, 1, 5, 10, 15];
     var c = values.sort();
     
     alert(values); //0,1,10,15,5
     alert(c); //0,1,10,15,5
     values === c; //true
     
     // 升序
     values.sort(function(a,b){return a-b}); // [0, 1, 5, 10, 15]
     // 降序
     values.sort(function(a,b){return b-a}); // [15, 10, 5, 1, 0]
     ```

- 操作方法

  1. concat()：**不改变**原数组，先创建当前数组的一个副本，然后将接收到的参数添加到这个副本的末尾，并返回新构建的数值。

     ```javascript
     var colors = ["red", "green", "blue"];
     var colors2 = colors.concat("yellow", ["black", "brown"]);
     alert(colors); //red,green,blue
     alert(colors2); //red,green,blue,yellow,black,brown
     ```

  2. slice()：**不改变**原数组，返回新数组。[起始位，结束位)。

     ```javascript
     var colors = ["red", "green", "blue", "yellow", "purple"];
     var colors2 = colors.slice(1);
     var colors3 = colors.slice(1,4);
     alert(colors2); //green,blue,yellow,purple
     alert(colors3); //green,blue,yellow
     ```

  3. splice()：**改变**原数组，是最强大的数组方法，返回从原始数组中删除的项，如果没有删除则返回空数组。(起始位，要删除的个数，插入值)。

     ```javascript
     var colors = ["red", "green", "blue"];
     var removed = colors.splice(0,1); // 删除第一项
     alert(colors); // green,blue
     alert(removed); // red，返回的数组中只包含一项
     
     removed = colors.splice(1, 0, "yellow", "orange"); // 从位置1 开始插入两项
     alert(colors); // green,yellow,orange,blue
     alert(removed); // 返回的是一个空数组
     
     removed = colors.splice(1, 1, "red", "purple"); // 插入两项，删除一项
     alert(colors); // green,red,purple,orange,blue
     alert(removed); // yellow，返回的数组中只包含一项
     ```

- 位置方法

  1. indexOf()：全等比较，(要查找的项，[查找起点位置])，返回要查找的项在数组中的位置，找不到返回-1。

  2. lastIndexOf()：全等比较，(要查找的项，[查找起点位置])，返回要查找的项在数组中的位置，找不到返回-1。

     ```javascript
     // 还能查找对象
     
     var person = { name: "Nicholas" };
     var people = [{ name: "Nicholas" }];
     var morePeople = [person];
     alert(people.indexOf(person)); //-1
     alert(morePeople.indexOf(person)); //0
     ```

- 迭代方法

  1. every()：对数组中的每一项运行给定函数，如果该函数对每一项都返回true，则返回true。

     ```javascript
     var numbers = [1,2,3,4,5,4,3,2,1];
     var everyResult = numbers.every(function(item, index, array){
     	return (item > 2);
     });
     alert(everyResult); //false
     ```

  2. some()：对数组中的每一项运行给定函数，如果该函数对任一项返回true，则返回true。

     ```javascript
     var someResult = numbers.some(function(item, index, array){
     	return (item > 2);
     });
     alert(someResult); //true
     ```

  3. filter()：对数组中的每一项运行给定函数，返回该函数会返回true 的项组成的数组。

     ```javascript
     var numbers = [1,2,3,4,5,4,3,2,1];
     var filterResult = numbers.filter(function(item, index, array){
     	return (item > 2);
     });
     alert(filterResult); //[3,4,5,4,3]
     ```

  4. map()：对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组。

     ```javascript
     var numbers = [1,2,3,4,5,4,3,2,1];
     var mapResult = numbers.map(function(item, index, array){
     	return item * 2;
     });
     alert(mapResult); //[2,4,6,8,10,8,6,4,2]
     ```

  5. forEach()：对数组中的每一项运行给定函数。这个方法没有返回值。

     ```javascript
     var numbers = [1,2,3,4,5,4,3,2,1];
     numbers.forEach(function(item, index, array){
     	//执行某些操作
     });
     ```

- 归并方法

  1. reduce()：从第一项开始，迭代数组的所有项，然后构建一个最终返回的值。

     ```javascript
     var values = [1,2,3,4,5];
     var sum = values.reduce(function(prev, cur, index, array){
     	return prev + cur;
     },100);
     alert(sum); //115
     ```

  2. reduceRight()：从最后一项开始，迭代数组的所有项，然后构建一个最终返回的值。

     ```javascript
     var values = [1,2,3,4,5];
     var sum = values.reduceRight(function(prev, cur, index, array){
     	return prev + cur;
     },100);
     alert(sum); //115
     ```

#### 3. Date 类型

​	Date类型使用自UTC（Coordinated Universal Time，国际协调时间）1970 年1 月1 日午夜（零时）开始经过的毫秒数来保存日期。

- 创建日期对象

  1. 获取当前日期时间

     ```javascript
     var now = new Date() // Fri Jun 12 2020 10:03:08 GMT+0800 (中国标准时间)
     var now = Date.now() // 1591927420323
     ```

  2. 根据特定的日期时间创建日期对象

     ```javascript
     // new Date()中传入日期时间的毫秒数
     // 获取毫秒数的两个方法：Date.parse("May 25, 2004");Date.UTC(2005, 4, 5, 17, 55, 55)
     
     // Tue May 25 2004 00:00:00 GMT+0800 (中国标准时间)
     var someDate = new Date(Date.parse("May 25, 2004")); 
     var someDate = new Date("May 25, 2004");
     
     // (这种方法在谷歌浏览器上未达到预期日期时间)
     // GMT 时间2000 年1 月1 日午夜零时
     var y2k = new Date(Date.UTC(2000, 0));
     // GMT 时间2005 年5 月5 日下午5:55:55
     var allFives = new Date(Date.UTC(2005, 4, 5, 17, 55, 55));
     
     // 本地时间2000 年1 月1 日午夜零时
     var y2k = new Date(2000, 0);
     // 本地时间2005 年5 月5 日下午5:55:55
     var allFives = new Date(2005, 4, 5, 17, 55, 55);
     ```

#### 4. RegExp 类型

​	`var expression = / pattern / flags`

- 三个模式匹配标志

  > g：表示全局（global）模式
  >
  > i：表示不区分大小写（case-insensitive）模式
  >
  > m：表示多行（multiline）模式

- 必须转义的**元字符**

  > ( [ { \ ^ $ | ) ? * + . ] }

- 创建一个正则表达式

  1. 以字面量形式

     ```
     /*
     * 匹配第一个"bat"或"cat"，不区分大小写
     */
     var pattern1 = /[bc]at/i;
     ```

  2. 使用RegExp构造函数

     ​	由于RegExp构造函数的模式参数是字符串，所以在某些情况下要对字符串进行双重转义。例如字符\在字符串中通常被转义为`\\`，而在正则表达式字符串中就会变成`\\\`。

     ```
     /*
     * 与pattern1 相同，只不过是使用构造函数创建的
     */
     var pattern2 = new RegExp("[bc]at", "i");
     ```


#### 5. Function 类型

#### 6. 基本包装类型

#### 7. 单体内置对象

#### 8. 小结